# 操作系统知识

1. 概述
2. 进程管理
3. 同步互斥



![QQ_1742308516877](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742308516877.png)



## 1. 概述

操作系统：组织和管理各种软硬件资源，合理组织工作流程，提供给用户工作环境和接口

**三个重要作用**

1. 管理运行的程序和分配软硬件资源
2. 提供人机界面
3. 提供一个高效率平台（开发和运行应用程序）

**四个特征**

- 并发性 - 并发是宏观上的，并行是微观上的 - 通过 分时调度，每个程序运行10ms，所以可以说，微观上是串行的。10ms反应不过来，所以像是假的并行，称之为并发
- 共享性 - 所有进程共享内存资源；所以线程共享所在进程的资源
- 虚拟性 - 物理硬件虚拟化为多台逻辑上的机器
- 不确定性 - 也称之为异步性，执行结果是不确定的，如何执行和调度也是不确定的



![QQ_1742308688923](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742308688923.png)

#### 操作系统的功能

- 进程管理 - 对CPU的分配管理
- 文件管理 - 对辅存（硬盘）的管理
- 存储管理 - 对主存（内存条）的管理
- 设备管理 - 对I/O设备的管理
- 作业管理 - 对任务、界面等的管理 - 了解即可

![QQ_1742309100872](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742309100872.png)



#### 操作系统的分类

![QQ_1742309160217](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742309160217.png)

分时操作系统最常见 - CPU 以 10ms 为时间片，切分N份

网络操作系统：客户端/服务器模式 - C/S架构； 对等模式 - P2P（PPP），可以互相当服务器/客户端

![QQ_1742482031923](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742482031923.png)

- 微型化 - 一般就几MB大小
- 对实时性、可靠性、安全性，要求极高
- 初始化过程 - 芯片级别初始化 -> 板子上各种外设 -> 操作系统（比如BIOS等）的初始化
- 补充一下PC初始化过程 - 硬件启动 -> BIOS(烧在主板上的固化程序)启动 -> OS启动

比如常见的，银行柜台机；更高智能的家电和车载屏幕



## 2. 进程管理

![QQ_1742482330469](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742482330469.png)

补充： TCB - 线程控制块；FCB - 文件控制块。 - Controller Block

**三态** - `运行态`（需要CPU）、`就绪态`（除了CPU什么都有了）、`阻塞态`（也可以叫`等待态` 没有CPU、还缺少其他条件比如外设整备使用中）

>  注意：需要能够画先来 `三态图`，知道谁和谁能相互转化，单向谁是和谁之间，从哪流向哪里
>
> 右侧的五态图，了解即可。新建态 和 终止态 从来不考，知道就行

  

### 前趋图

![QQ_1742740952587](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742740952587.png)

右图中，ABC需要同时完成，才能进入D



### 进程资源图

![QQ_1742741151567](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742741151567.png)

了解即可，最近十年都没考过

> 资源的分配，用图判断是否 陷入死锁状态



## 3. 进程同步与互斥 - 考点

![QQ_1742741769849](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742741769849.png)

- 临界资源 vs 共享资源
- `临界区` 是 **代码程序**，不是一块空间
- 同步 vs 互斥
- 互斥信号量（访问临界资源） vs 同步信号量（访问共享资源）
- 共享信号量也有**数量上限**，初始开始 N-1、-1、-1； 互斥信号量相反，1和0（没有+1，因为互斥了）



![QQ_1742819405925](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742819405925.png)

- `P(S)` 操作： 申请资源， -1、-1、-1.  为什么会 `S<0`，因为先 `S=S-1`，再看S的值；N个申请，则为 `0-N` 
- `V(S)` 操作：释放资源（往里面扔资源）， `S<0`，比如 `-N`, 是因为有N个进程在**等待**资源释放
- 图中的 `T/F` 表示 `true / false`



![QQ_1742820068330](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742820068330.png) 

这是个互斥语句怎么写

申请一个空闲位置；申请到了，释放一个商品（扔进S2中）



**真题** 必考

>  考察方式一

![QQ_1742821547667](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742821547667.png)

**前趋图每一条线对应一个信号量**，但是没说 `P1 对应S1`，P1连接两条线，所以是对应了`S1 和 S2`

P1执行完，释放了两条信号量（因为P1连接着两条线）

PS： 蒙对了后两个答案，还行，怒拿2分



> 考察方式二

![QQ_1742822254508](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742822254508.png)

会做，但是最后一个题，`5和6的空位看错了`，答案选错了，尴尬...


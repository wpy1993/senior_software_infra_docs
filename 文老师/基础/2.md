# 计算机硬件

> 考的概率很少



![QQ_1741275498133](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1741275498133.png)



## 计算机基本五大硬件：

`运算器`+`控制器` 部件 - 被集成到一起，称之为 CPU （central Processing Unit) - 中央处理单元

CPU其他部位有 - 寄存器组（比如64bit，贼小的存储器）、内存总线

`存储器` - 内部存储器（内存） + 外部存储器（硬盘、光盘、U盘）

`输入设备`+`输出设备` - 外部设备（外设）



## CPU功能

1. 程序控制 - 下面三个都是控制器
2. 操作控制
3. 时间控制
4. 数据处理 - 运算器 - 算术运算和逻辑运算

5. 对系统内部和外部的中断（异常）做出响应和处理

![QQ_1741970122082](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1741970122082.png)

程序计数器PC - 这个才是存储所有的指令所在的地址，这样方便未来读取地址

地址寄存器AR - 当前CPU访问的内存地址

考点（最后一句）：CPU依据`指令周期的不同阶段`来区分`指令` or `数据`





## 校验码

**没懂**： 奇偶码数原因；

![QQ_1742139971147](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742139971147.png)

ps： **奇偶校验**码距为2的原因：一个校验位+一个错误位置（当有错误的时候用的）



![QQ_1742140510799](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742140510799.png)

除数为什么是`10011`，因为多项式为 `x^4 +x^1 + 1`，1 就是 `x^0`，最高次方为4，所以有5位，且`倒着`数 - 0次方、1次方、2次方、3次方、4次方，正好 `10011`

 **模2运算** - `异或`运算 - 同0异1

![QQ_1742140962962](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742140962962.png)



## 指令系统

![QQ_1742222431262](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742222431262.png)

一个操作码 + N个地址码，地址码从`（程序计数器） PC`中取出来



![QQ_1742222584859](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742222584859.png)



![QQ_1742222824965](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742222824965.png)

实现方式记一下

单词

CISC - **complex** instruction set computer

RISC - **Reduced** instruction set computer - 减少的、简化的

![QQ_1742223107244](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742223107244-2223111.png)



![QQ_1742223259802](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742223259802.png)

如图，流水线，能够取指、分析、执行，各自有各自的构件去执行

仅限于 **精简指令集** 用



![QQ_1742223420089](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742223420089.png)

**这里是计算，是个重点**

周期：取最长那段即可，并非所有段相加

流水线执行时间 直接记住吧，我没看懂？看起来和上上张图，流水线重叠有关，见下题用法

加速比：是个大于1的数字

![QQ_1742223853193](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742223853193.png)



## 存储系统

![QQ_1742224911304](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742224911304.png)

- 寄存器 - 32bit / 64bit

- Cache - 3MB等 - 高速缓冲寄存器 - 现如今技术也分为`多级缓存`了

- 主存储器 - 内存条 - 8GB

- 联机磁盘等 - 硬盘 - 1TB等



**Cache的特点**

![QQ_1742225534056](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742225534056.png)

>  地址映射，由**硬件自动完成** - 重点考点送分题 ！！！

三种方法

- 直接相联 - 把cache和内存，切成相同的块数量，但是cache的量都是mini版 - `冲突概率`
- 全相联映射 - 没有规定块号相等了，随便乱对应，但是要一一对应，复杂、但是无浪费
- 组组相莲映射 - 先分块，再分组；组和组之间直接相连，组内全相联映射

三种方法 **块冲突概率**，由高到低  - `直接映像 -> 组组相恋映像 -> 全相联映像`



内存调入cache时的**替换算法**

- 随机替换算法
- 先进先出算法
- 近期最少使用算法 - 最常用算法 - 利用了局部性原理
- 优化替换算法 - 需要先执行一次，统计cache的替换情况，然后找出最有效的方法



cache的命中率 （CPU访问的数据正好在cache中的概率）

![QQ_1742226162059](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742226162059.png)

本质上来说是有漏洞的。因为cache 100%访问了，10%的概率再访问内存。
但是这个完整版逻辑知道就行，考试用的就是上图中的算法
平均时间 = `cache概率 * cache时间 + （1-cache概率） * 内存时间`





### 磁盘

![QQ_1742226697366](/Users/wplay/2025/senior_software_infra_docs/文老师/基础/assets/QQ_1742226697366.png)

存取时间 = 寻道时间+等待时间



寻道也是通过比如顺时针旋转来跑到位置的 - 磁盘7200转，就是每秒转7200圈，但是不清楚什么时候跑到道路对应的点
